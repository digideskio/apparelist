extends layout
block content

  table.table.table-bordered
    thead
      tr.tr-bag
        th Image
        th Name / Brand
        th Price
        th Action
      tbody
        for item in bag
          tr.bag-items(id='row-#{item.id}')
            td
              img.img-polaroid(src='#{item.image}')
            td
              img.store-logo-big(src='#{item.logo}')
              .lead #{item.name}
            td
              .lead #{item.price}
            td
              button.btn.btn-mini.btn-danger(id='item-#{item.id}')
                i.icon-trash
                |  Remove
              button.btn.btn-mini.btn-success
                i.icon-shopping-cart
                |  Buy
              button.btn.btn-mini.btn-warning
                i.icon-share
                |  Share
          script(type='text/javascript')
            $('#item-#{item.id}').click(function() {
              $.ajax({
                type: 'delete',
                url: '/bag',
                data: '#{item}',
                success: function() {
                  $('#bagcount').text(parseInt($('#bagcount').text()) - 1);
                }
              });
              toastr.error('An item has been removed from your bag.');
              $('#row-#{item.id}').remove();
            });
